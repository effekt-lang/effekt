import examples/benchmarks/runner

def factorial(a: Int, i: Int): Int =
  if (i == 0) {
    a
  } else {
    // We are using `i.mod(2^53-1)` to prevent LLVM from constant folding this whole program
    factorial(i * a, i.mod(9007199254740991) - 1)
  }

def run(n: Int): Int =
  factorial(1, n)

def main() = benchmark(5){run}

