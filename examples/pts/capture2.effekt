effect Eff { def use(): Unit }

def myModule { eff : Eff } = {
  val e = fun() { eff.use(); () };
  def x = unbox e;
  def test1b = x;

  // val f: () => Unit at { _ } = test1b; // THIS IS WRONG: Wildcard is applied with annotating " _ ", not " { _ } "
  val f: () => Unit at _ = test1b;

  f
}

val result = try { myModule { e } } with e: Eff { def use() = resume(()) }
